<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="job_order_template">
        <t t-name="oxord_repair.job_order_template">
            <main>

                <t t-foreach="docs" t-as="o">

                    <style>
                        @page {
                            size: A4;
                            margin: 15mm;
                        }
                        body {
                            font-family: Arial, sans-serif;
                            font-size: 13px;
                        }
                        main {
                            font-size: 13px;
                        }
                        .oxord-section {
                            background:#e0f2f1;
                            color:#004d40;
                            font-weight:bold;
                            padding:4px 8px;
                            margin-top:6mm;
                            border-left:4px solid #00796b;
                            font-size:13px;
                        }

                        .tech-box {
                            border:1px solid #00796b;
                            padding:8px;
                            margin-top:3mm;
                            font-size:13px;
                        }
                        table {
                            width:100%;
                            border-collapse:collapse;
                            font-size:13px;
                        }
                        td {
                            padding:4px 6px;
                            vertical-align:top;
                        }
                    </style>

                    <!-- HEADER -->
                    <table style="width:100%; border-bottom:2px solid #009688; margin-bottom:6mm;">
                        <tr>
                            <td style="width:25%;">
                                <img t-if="o.company_id.logo"
                                     t-att-src="'data:image/png;base64,%s' % o.company_id.logo.decode()"
                                     style="height:55px;"/>
                            </td>
                            <td>
                                <div style="font-size:17px; font-weight:bold; color:#004d40;">
                                    OXORD COMPUTER SOLUTIONS &amp; REPAIR CENTER
                                </div>
                                <div style="font-size:12px;">
                                    2F Robinsons Place Roxas, Pueblo de Panay Lawa-an, Roxas City
                                </div>
                                <div style="font-size:12px;">
                                    La Hacienda Annex Bldg., Arnaldo Blvd., Roxas City, Capiz                                
                                </div>
                            </td>
                        </tr>
                    </table>

                    <!-- JOB ORDER NO -->
                    <div style="font-size:16px; font-weight:bold; margin-bottom:6mm;">
                        JOB ORDER NO: <t t-esc="o.name"/>
                    </div>

                    <!-- 1. CUSTOMER INFORMATION -->
                    <div class="oxord-section">Customer Information</div>
                    <div class="tech-box">
                        <table>
                            <tr><td>Name:</td><td><t t-esc="o.partner_id.name or '-'"/></td></tr>
                            <tr><td>Phone:</td><td><t t-esc="o.phone or '-'"/></td></tr>
                            <tr><td>Company:</td><td><t t-esc="o.company_id.name or '-'"/></td></tr>
                            <tr><td>Address:</td><td><t t-esc="o.partner_id.contact_address or '-'"/></td></tr>
                            <tr><td>Job Name / Location:</td><td><t t-esc="o.job_name or '-'"/></td></tr>
                            <tr><td>Job Phone:</td><td><t t-esc="o.job_phone or '-'"/></td></tr>
                        </table>
                    </div>

                    <!-- 2. ORDER INFORMATION -->
                    <div class="oxord-section">Order Information</div>
                    <div class="tech-box">
                        <table>
                            <tr><td>Order Taken By:</td><td><t t-esc="o.user_id.name or '-'"/></td></tr>
                            <tr><td>Order Date:</td><td><t t-esc="o.order_date or '-'"/></td></tr>
                            <tr><td>Servicer:</td><td><t t-esc="o.servicer_id.name or '-'"/></td></tr>
                            <tr>
                                <td>Job Type:</td>
                                <td>
                                    <div style="display:flex; gap:16px; flex-wrap:wrap;">
                                        <t t-foreach="o._fields['job_type'].selection" t-as="opt">
                                            <label style="display:flex; align-items:center; gap:6px;">
                                                <input type="checkbox" disabled="disabled"
                                                       t-att-checked="o.job_type == opt[0]"/>
                                                <t t-esc="opt[1]"/>
                                                <t t-if="opt[0]=='others' and o.job_type=='others'">
                                                    - <t t-esc="o.job_type_others"/>
                                                </t>
                                            </label>
                                        </t>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>

                    <!-- 3. DESCRIPTION -->
                    <div class="oxord-section">Description</div>
                    <div style="border:1px solid #00796b; border-radius:5px; padding:6px; height:40mm; background-color:#FFFFFF; font-size:13px; white-space:pre-wrap;">
                        <t t-esc="o.description or ' '"/>
                    </div>


                    <!-- 4. JOB DETAILS -->
                    <div class="oxord-section">Job Details</div>
                    <div class="tech-box">
                        <table>
                            <tr>
                                <!-- LEFT -->
                                <td style="width:50%;">
                                    <table>
                                        <tr>
                                            <td>Comments:</td>
                                            <td><t t-esc="o.comments or '-'"/></td>
                                        </tr>
                                        <tr>
                                            <td>Job Status:</td>
                                            <td>
                                                <div style="display:flex; gap:16px; flex-wrap:wrap;">
                                                    <t t-foreach="o._fields['job_status'].selection" t-as="opt">
                                                        <label style="display:flex; align-items:center; gap:6px;">
                                                            <input type="checkbox" disabled="disabled"
                                                                   t-att-checked="o.job_status == opt[0]"/>
                                                            <t t-esc="opt[1]"/>
                                                        </label>
                                                    </t>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                </td>

                                <!-- RIGHT -->
                                <td style="width:50%;">
                                    <table>
                                        <tr><td>Total Materials:</td><td><t t-esc="o.total_materials or 0"/></td></tr>
                                        <tr><td>Total Labor:</td><td><t t-esc="o.total_labor or 0"/></td></tr>
                                        <tr><td>Tax:</td><td><t t-esc="o.tax or 0"/></td></tr>
                                        <tr><td><b>Total Due:</b></td><td><b><t t-esc="o.total_due or 0"/></b></td></tr>
                                    </table>
                                </td>
                            </tr>

                            <tr>
                                <td colspan="2" style="padding-top:8mm;">
                                    <table>
                                        <tr>
                                            <td style="width:50%;">Date Completed: <t t-esc="o.date_completed or '-'"/></td>
                                            <td style="width:50%;">Work Ordered By: <t t-esc="o.ordered_by or '-'"/></td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </table>
                    </div>

                    <!-- ACKNOWLEDGEMENT -->
                    <div class="oxord-section">Completion Acknowledgement</div>
                    <div class="tech-box">
                        <p>I hereby acknowledge that work specified above has been satisfactorily completed.</p>
                        <table style="margin-top:8mm;">
                            <tr>
                                <td style="width:50%; text-align:center;">
                                    ___________________________<br/>Printed Name &amp; Signature
                                </td>
                                <td style="width:50%; text-align:center;">
                                    ___________________________<br/>Date &amp; Time Completed
                                </td>
                            </tr>
                        </table>
                    </div>

                    <!-- FOOTER -->
                    <div class="tech-box" style="text-align:center;">
                        Make all checks payable to OXORD Computer Solutions &amp; Repair Center<br/>
                        Thank you for your business!
                    </div>

                    <div class="tech-box" style="text-align:center; font-size:11px;">
                        OXORD Computer Solutions is an Authorized Service Center of SAMSUNG, LENOVO, ASUS, BROTHER, FUJI, RICOH
                        and Corporate Service Partner of EPSON
                    </div>
                        <!-- FOOTER -->
                    <div class="oxord-footer">
                        <div>
                            <strong>Office:</strong>
                            (036) 522-2552 | GLOBE ·
                            (036) 621-3621 | PLDT
                        </div>
                        <div>
                            <strong>Service:</strong>
                            0963 391 9832 | GLOBE ·
                            (036) 520-7055
                        </div>
                        <div>
                            <strong>Sales:</strong>
                            0963 045 4012 | GLOBE ·
                            (036) 621-3812 | PLDT
                        </div>
                    </div>

                </t>
            </main>
        </t>
    </template>
</odoo>

